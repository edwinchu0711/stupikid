<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Actions ç•™è¨€æ¿</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 900px;
          margin: 0 auto;
          background: white;
          border-radius: 15px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          overflow: hidden;
      }
      
      .header {
          background: linear-gradient(45deg, #24292e, #586069);
          color: white;
          padding: 40px 30px;
          text-align: center;
      }
      
      .header h1 {
          font-size: 2.8em;
          margin-bottom: 10px;
      }
      
      .header p {
          opacity: 0.9;
          font-size: 1.2em;
      }
      
      .github-info {
          background: linear-gradient(135deg, #f1f8ff, #e1f5fe);
          border: 2px solid #c8e1ff;
          border-radius: 12px;
          padding: 25px;
          margin: 30px;
          text-align: center;
      }
      
      .github-info h3 {
          color: #0366d6;
          margin-bottom: 15px;
          font-size: 1.4em;
      }
      
      .github-info p {
          color: #586069;
          margin-bottom: 20px;
          line-height: 1.6;
      }
      
      .form-section {
          padding: 40px 30px;
          background: linear-gradient(135deg, #f8f9fa, #e9ecef);
          border-bottom: 1px solid #dee2e6;
      }
      
      .form-title {
          text-align: center;
          margin-bottom: 30px;
          color: #24292e;
          font-size: 1.8em;
      }
      
      .form-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
      }
      
      .form-group {
          margin-bottom: 20px;
      }
      
      .form-group.full-width {
          grid-column: 1 / -1;
      }
      
      .form-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #24292e;
          font-size: 1.1em;
      }
      
      .form-group input,
      .form-group textarea {
          width: 100%;
          padding: 15px 18px;
          border: 2px solid #e1e4e8;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s ease;
          font-family: inherit;
      }
      
      .form-group input:focus,
      .form-group textarea:focus {
          outline: none;
          border-color: #0366d6;
          box-shadow: 0 0 0 4px rgba(3, 102, 214, 0.1);
      }
      
      .form-group textarea {
          resize: vertical;
          min-height: 150px;
          line-height: 1.6;
      }
      
      .submit-btn {
          background: linear-gradient(45deg, #28a745, #20c997);
          color: white;
          padding: 15px 40px;
          border: none;
          border-radius: 10px;
          font-size: 18px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          display: block;
          margin: 0 auto;
      }
      
      .submit-btn:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
      }
      
      .github-submit-btn {
          background: linear-gradient(45deg, #0366d6, #0256cc);
          color: white;
          padding: 15px 40px;
          border: none;
          border-radius: 10px;
          font-size: 18px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          display: block;
          margin: 20px auto 0;
          text-decoration: none;
          text-align: center;
      }
      
      .github-submit-btn:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 25px rgba(3, 102, 214, 0.3);
      }
      
      .messages-section {
          padding: 40px 30px;
      }
      
      .messages-title {
          text-align: center;
          margin-bottom: 30px;
          color: #24292e;
          font-size: 1.8em;
      }
      
      .message {
          background: linear-gradient(135deg, #ffffff, #f8f9fa);
          border: 1px solid #e1e4e8;
          border-radius: 15px;
          padding: 25px;
          margin-bottom: 25px;
          box-shadow: 0 4px 15px rgba(0,0,0,0.08);
          transition: all 0.3s ease;
      }
      
      .message:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 30px rgba(0,0,0,0.15);
      }
      
      .message-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 15px;
          padding-bottom: 15px;
          border-bottom: 2px solid #f1f3f4;
      }
      
      .message-author {
          font-weight: 700;
          color: #0366d6;
          font-size: 1.2em;
      }
      
      .message-date {
          color: #586069;
          font-size: 0.95em;
          background: #f1f3f4;
          padding: 5px 12px;
          border-radius: 20px;
      }
      
      .message-content {
          color: #24292e;
          line-height: 1.8;
          font-size: 1.05em;
          word-wrap: break-word;
      }
      
      .alert {
          padding: 15px 20px;
          margin: 20px 0;
          border-radius: 8px;
          font-weight: 500;
      }
      
      .alert.info {
          background: #cce5ff;
          color: #004085;
          border: 1px solid #99d6ff;
      }
      
      .step-guide {
          background: #fff3cd;
          border: 1px solid #ffeaa7;
          border-radius: 10px;
          padding: 20px;
          margin: 20px 0;
      }
      
      .step-guide h4 {
          color: #856404;
          margin-bottom: 15px;
          font-size: 1.2em;
      }
      
      .step-guide ol {
          color: #856404;
          padding-left: 20px;
      }
      
      .step-guide li {
          margin-bottom: 8px;
          line-height: 1.5;
      }
      
      @media (max-width: 768px) {
          .container {
              margin: 10px;
              border-radius: 10px;
          }
          
          .header {
              padding: 30px 20px;
          }
          
          .header h1 {
              font-size: 2.2em;
          }
          
          .form-section,
          .messages-section {
              padding: 30px 20px;
          }
          
          .form-grid {
              grid-template-columns: 1fr;
              gap: 15px;
          }
          
          .github-info {
              margin: 20px;
              padding: 20px;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸš€ GitHub Actions ç•™è¨€æ¿</h1>
          <p>ä½¿ç”¨ GitHub Issues è™•ç†ç•™è¨€çš„ç¾ä»£ç•™è¨€ç³»çµ±</p>
      </div>
      
      <div class="github-info">
          <h3>ğŸ“‹ å¦‚ä½•ç•™è¨€ï¼Ÿ</h3>
          <p>å¡«å¯«ä¸‹æ–¹è¡¨å–®å¾Œï¼Œé»æ“Šã€Œå‰å¾€ GitHub ç•™è¨€ã€æŒ‰éˆ•ï¼Œç³»çµ±æœƒè‡ªå‹•ç”¢ç”Ÿ GitHub Issue è®“ä½ æäº¤ç•™è¨€ã€‚</p>
      </div>
      
      <div class="form-section">
          <h2 class="form-title">ğŸ’¬ æº–å‚™ç•™è¨€</h2>
          <form id="messageForm">
              <div class="form-grid">
                  <div class="form-group">
                      <label for="name">ğŸ‘¤ å§“å *</label>
                      <input type="text" id="name" name="name" required placeholder="è«‹è¼¸å…¥ä½ çš„å§“å" maxlength="50">
                  </div>
                  
                  <div class="form-group">
                      <label for="email">ğŸ“§ Email (é¸å¡«)</label>
                      <input type="email" id="email" name="email" placeholder="your@email.com" maxlength="100">
                  </div>
              </div>
              
              <div class="form-group full-width">
                  <label for="message">ğŸ’­ ç•™è¨€å…§å®¹ *</label>
                  <textarea id="message" name="message" required placeholder="è«‹è¼¸å…¥ä½ çš„ç•™è¨€å…§å®¹..." maxlength="1000"></textarea>
              </div>
              
              <button type="button" class="submit-btn" id="prepareBtn">
                  ğŸ“ æº–å‚™ç•™è¨€
              </button>
              
              <a href="#" class="github-submit-btn" id="githubBtn" style="display: none;" target="_blank">
                  ğŸš€ å‰å¾€ GitHub ç•™è¨€
              </a>
          </form>
          
          <div class="step-guide" id="stepGuide" style="display: none;">
              <h4>ğŸ“‹ ç•™è¨€æ­¥é©Ÿï¼š</h4>
              <ol>
                  <li>é»æ“Šä¸Šæ–¹ã€Œå‰å¾€ GitHub ç•™è¨€ã€æŒ‰éˆ•</li>
                  <li>åœ¨é–‹å•Ÿçš„ GitHub é é¢ä¸­ï¼Œç¢ºèªç•™è¨€å…§å®¹</li>
                  <li>é»æ“Šã€ŒSubmit new issueã€æäº¤</li>
                  <li>ç•™è¨€å°‡æœƒè‡ªå‹•å‡ºç¾åœ¨ä¸‹æ–¹åˆ—è¡¨ä¸­</li>
              </ol>
          </div>
          
          <div id="alertContainer"></div>
      </div>
      
      <div class="messages-section">
          <h2 class="messages-title">ğŸ’­ æœ€æ–°ç•™è¨€</h2>
          <div id="messagesList">
              <div class="message">
                  <div class="message-header">
                      <span class="message-author">ç³»çµ±ç®¡ç†å“¡</span>
                      <span class="message-date">2025-08-28 20:35</span>
                  </div>
                  <div class="message-content">
                      æ­¡è¿ä½¿ç”¨ GitHub Actions ç•™è¨€æ¿ï¼é€™æ˜¯ä¸€å€‹ç¤ºç¯„ç•™è¨€ã€‚è«‹æŒ‰ç…§ä¸Šæ–¹æ­¥é©Ÿä¾†æäº¤ä½ çš„ç•™è¨€ã€‚
                  </div>
              </div>
              
              <div class="alert info">
                  ğŸ’¡ <strong>æç¤ºï¼š</strong>ç•™è¨€æœƒé€é GitHub Issues å„²å­˜ï¼Œæäº¤å¾Œéœ€è¦ç­‰å¾… GitHub Actions è™•ç†ï¼ˆé€šå¸¸å¹¾åˆ†é˜å…§å®Œæˆï¼‰ã€‚
              </div>
          </div>
      </div>
  </div>
  
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          const form = document.getElementById('messageForm');
          const prepareBtn = document.getElementById('prepareBtn');
          const githubBtn = document.getElementById('githubBtn');
          const stepGuide = document.getElementById('stepGuide');
          const alertContainer = document.getElementById('alertContainer');
          
          // è«‹æ›¿æ›ç‚ºä½ çš„å¯¦éš› GitHub è³‡è¨Š
          const GITHUB_USERNAME = 'ä½ çš„GitHubç”¨æˆ¶å';  // è«‹ä¿®æ”¹é€™è£¡
          const REPO_NAME = 'ä½ çš„å€‰åº«å';              // è«‹ä¿®æ”¹é€™è£¡
          
          prepareBtn.addEventListener('click', function() {
              const name = document.getElementById('name').value.trim();
              const email = document.getElementById('email').value.trim();
              const message = document.getElementById('message').value.trim();
              
              // é©—è­‰è¡¨å–®
              if (!name || name.length < 2) {
                  showAlert('error', 'âŒ è«‹è¼¸å…¥è‡³å°‘ 2 å€‹å­—å…ƒçš„å§“å');
                  return;
              }
              
              if (!message || message.length < 5) {
                  showAlert('error', 'âŒ ç•™è¨€å…§å®¹è‡³å°‘éœ€è¦ 5 å€‹å­—å…ƒ');
                  return;
              }
              
              if (email && !isValidEmail(email)) {
                  showAlert('error', 'âŒ è«‹è¼¸å…¥æœ‰æ•ˆçš„ Email åœ°å€');
                  return;
              }
              
              // ç”¢ç”Ÿ GitHub Issue URL
              const issueTitle = `[ç•™è¨€] ${name} çš„ç•™è¨€`;
              const issueBody = `## ğŸ“ ç•™è¨€è³‡è¨Š

**å§“å:** ${name}

**Email:** ${email || 'æœªæä¾›'}

**ç•™è¨€å…§å®¹:**
${message}

---

> ğŸ’¡ é€™æ˜¯é€éç•™è¨€æ¿è‡ªå‹•ç”¢ç”Ÿçš„ Issue
> ğŸ•’ æäº¤æ™‚é–“: ${new Date().toLocaleString('zh-TW')}`;
              
              const githubUrl = `https://github.com/${GITHUB_USERNAME}/${REPO_NAME}/issues/new?` +
                  `title=${encodeURIComponent(issueTitle)}&` +
                  `body=${encodeURIComponent(issueBody)}&` +
                  `labels=guestbook-message`;
              
              githubBtn.href = githubUrl;
              githubBtn.style.display = 'block';
              stepGuide.style.display = 'block';
              
              showAlert('success', 'âœ… ç•™è¨€æº–å‚™å®Œæˆï¼è«‹é»æ“Šã€Œå‰å¾€ GitHub ç•™è¨€ã€æŒ‰éˆ•ç¹¼çºŒã€‚');
              
              // æ»¾å‹•åˆ° GitHub æŒ‰éˆ•
              githubBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
          });
          
          function showAlert(type, message) {
              const alertClass = type === 'error' ? 'alert error' : 'alert success';
              alertContainer.innerHTML = `
                  <div class="${alertClass}" style="background: ${type === 'error' ? '#f8d7da' : '#d4edda'}; color: ${type === 'error' ? '#721c24' : '#155724'}; border: 1px solid ${type === 'error' ? '#f5c6cb' : '#c3e6cb'}; padding: 15px; border-radius: 8px; margin: 15px 0;">
                      ${message}
                  </div>
              `;
              
              setTimeout(() => {
                  alertContainer.innerHTML = '';
              }, 5000);
          }
          
          function isValidEmail(email) {
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              return emailRegex.test(email);
          }
          
          // è¼‰å…¥ç¾æœ‰ç•™è¨€ï¼ˆå¾ GitHub Issues APIï¼‰
          loadMessages();
          
          async function loadMessages() {
              try {
                  const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/issues?labels=guestbook-message&state=closed`);
                  const issues = await response.json();
                  
                  if (issues && issues.length > 0) {
                      renderGitHubMessages(issues);
                  }
              } catch (error) {
                  console.log('è¼‰å…¥ GitHub Issues ç•™è¨€:', error);
                  // ä¸é¡¯ç¤ºéŒ¯èª¤ï¼Œå› ç‚ºå¯èƒ½æ˜¯å€‰åº«é‚„æ²’è¨­å®šå¥½
              }
          }
          
          function renderGitHubMessages(issues) {
              const messagesList = document.getElementById('messagesList');
              const existingAlert = messagesList.querySelector('.alert');
              
              const messagesHTML = issues.map(issue => {
                  const date = new Date(issue.created_at);
                  const formattedDate = date.toLocaleString('zh-TW');
                  
                  // å¾ Issue body ä¸­æå–å§“åå’Œç•™è¨€å…§å®¹
                  const body = issue.body || '';
                  const nameMatch = body.match(/\*\*å§“å:\*\*\s*(.+)/);
                  const messageMatch = body.match(/\*\*ç•™è¨€å…§å®¹:\*\*\s*\n([\s\S]*?)(?:\n---|\n>|$)/);
                  
                  const name = nameMatch ? nameMatch[1].trim() : issue.user.login;
                  const message = messageMatch ? messageMatch[1].trim() : issue.title;
                  
                  return `
                      <div class="message">
                          <div class="message-header">
                              <span class="message-author">${escapeHtml(name)}</span>
                              <span class="message-date">${formattedDate}</span>
                          </div>
                          <div class="message-content">${escapeHtml(message).replace(/\n/g, '<br>')}</div>
                      </div>
                  `;
              }).join('');
              
              // ä¿ç•™ç¾æœ‰çš„ç³»çµ±ç•™è¨€å’Œæç¤º
              const systemMessage = messagesList.querySelector('.message');
              const systemMessageHTML = systemMessage ? systemMessage.outerHTML : '';
              const alertHTML = existingAlert ? existingAlert.outerHTML : '';
              
              messagesList.innerHTML = systemMessageHTML + messagesHTML + alertHTML;
          }
          
          function escapeHtml(text) {
              const div = document.createElement('div');
              div.textContent = text;
              return div.innerHTML;
          }
      });
  </script>
</body>
</html>
